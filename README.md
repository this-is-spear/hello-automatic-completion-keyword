## 개요

[가상 면접 사례로 배우는 대규모 시스템 설계 기초](https://m.yes24.com/Goods/Detail/102819435) 책을 읽고 한 명의 사용자 부터 수천 명의 사용자까지 어떻게 스케일링 할 수 있을지 고민하기 위해 생성된 프로젝트 입니다.

책에서는 천 만명을 기준으로 시스템을 구축하지만 아래와 같은 고민이 들었습니다.

![image](https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/c7f318be-9e71-4681-a0ae-72a69e61c488)

책 처럼 `천 만 명의 사용자를 기준으로 설계할 일이 있을지` 고민 했을 때, 적은 사용자 수부터 함께 성장하는 서비스라고 생각하게 됐고, `적은 사용자 수부터 함께 성장 할 수 있는 서비스는 어떻게 만들어야 할지` 고민하게 됐습니다.

처음 고민하게 된 시스템 구조는 다음과 같습니다.

![image](https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/a5a90ad0-5202-40f0-9b4e-9e4c065f28c4)

단점
- 확장성이 부족하다.
- 단일 실패 지점이 많다.

단점들을 보완하기 위해 모듈을 분리해 확장성과 가용성을 확보 할 수 있었습니다.

![image](https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/cb51ea34-6680-426e-b282-3bf2c245f312)

## 문제

🛠️ 작성중

## 원인

🛠️ 작성중

## 해결

🛠️ 작성중

## 결말

### 제공하려는 방법에 따라 시스템 설계가 금변함을 체감

자료구조를 직접 구현하면서 느낀건 제공하려는 방법에 따라 데이터 관리 방법이 급변하게 변화한다는 것입니다.

![image](https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/cac1d319-f732-496d-a93e-b4bab4ba8ae4)

### 어깨너머 검색엔진 배우기

이번 기회에 구글과 네이버의 검색 엔진을 엿보게 됐습니다. 구글과 네이버는 각각 120ms, 10ms 내외로 응답 데이터를 전달하고 있었습니다.

### 어깨너머 검색엔진 배우기 - 구글

데이터의 방대함과 글로벌 서비스라는 점, 그리고 전달되는 응답 데이터 양을 봤을 때 120ms 정도 걸리는게 이해가 갔습니다.
아니면 120ms 내외로 정책이 설정되어 있는지 궁금해지기도 했습니다.

|클라이언트 UI|전달받는 응답 데이터|
|--|--|
|<img width="694" alt="스크린샷 2023-12-17 오후 11 31 41" src="https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/7ecb2c5e-69fe-4733-adfb-5b9b0a0be23a"> |![image](https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/cf67c540-f238-4635-856f-c836dc43a311)|

구글의 응답 데이터는 xhr 형식이었습니다. 

```
)]}'
[[
  ["안녕하세요 노래 가사",35,[512,650,39],{...}],
  ["안녕하세요",46,[512,433],{...}],
  ["안녕하세요 저는 귀하의 장치의 운영 체제를 해킹한 전문 프로그래머입니다",0,[512]],
  ["안녕하세요 일본어",0,[512]],
  ["안녕하세요 노래",46,[512,340],{...}],
  ["안녕하세요 영어로",0,[512]],
  ["안녕하세요 짤",0,[512]],
  ["안녕하세요 중국어",0,[512]],
  ["안녕하세요 감사해요 잘있어요 다시만나요",0,[512]],
  ["안녕하세요 저는 트위치에서 방송을 하고 있는 스트리머 케인입니다",0,[512]
]],
...]
```

### 어깨너머 검색엔진 배우기 - 네이버

네이버는 구글보다 5배 빠른 성능을 보이고 있습니다. 빠른 속도를 원하는 한국인의 특성을 잘 활용한 모습을 볼 수 있었습니다. 그러나 아래 그림처럼 처음 데이터가 조회되는 경우 한 순간 느려지는 상황도 보였습니다.

![image](https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/cb55d946-b5c6-4bc9-b9a3-39e81d297683)

다시 동일한 요청을 보내게 되면 응답 데이터를 캐싱해서 보다 빠른 속도로 전달하는 모습도 확인했습니다.

|클라이언트 UI|전달받는 응답 데이터|
|--|--|
|<img width="698" alt="스크린샷 2023-12-17 오후 11 31 54" src="https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/3ca7c9b7-b5c9-443f-ae4c-aaf43cc16b37">|![image](https://github.com/this-is-spear/hello-automatic-completion-keyword/assets/92219795/75658c25-02c0-4a5f-8fbb-6daaf92b1ed9) |

네이버의 응답 데이터는 json 형식이었습니다.

```
_jsonp_8({
"query" : ["안녕하세요"],
"answer" : [],
"intend" : [],
"items" : [
  [["안녕하세요 일본어", "0"],
  ["안녕하세요 노래", "0"],
  ["안녕하세요 적당히 바람이", "0"],
  ["안녕하세요 베트남어", "0"],
  ["안녕하세요", "0"],
  ["안녕하세요 영화", "0"],
  ["안녕하세요 일본어로", "0"],
  ["안녕하세요 중국어", "0"],
  ["안녕하세요 영어로", "0"],
  ["안녕하세요 러시아어", "0"]]
]
})
```
